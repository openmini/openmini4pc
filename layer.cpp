/*******************************************************************************

Copyright 2024 openmini (copyright@openmini.org)

This file is part of openmini.

openmini is free software: you can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any later
version.

openmini is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with
openmini. If not, see <https://www.gnu.org/licenses/>.

*******************************************************************************/
#include "api/bus/pin.hpp"
#include "api/everything.hpp"
#include "api/main.hpp"
#include <SDL2/SDL_events.h>
#include <SDL2/SDL_keycode.h>
#include <SDL2pp/Renderer.hh>
#include <SDL2pp/SDL2pp.hh>
#include <SDL2pp/Texture.hh>
#include <SDL2pp/Window.hh>
#include <cstdint>
#include <cstdlib>
#include <filesystem>
#include <fstream>
#include <ios>
#include <iostream>
#include <istream>
#include <memory>
#include <string>
#include <system_error>
#include <vector>
using namespace SDL2pp;
openmini::screen::screen() {}
void openmini::screen::draw(uint16_t *buf, int16_t x, int16_t y, uint8_t width, uint8_t height) {}
void openmini::screen::fill(int16_t x, int16_t y, uint8_t width, uint8_t height, uint16_t color) {}
void openmini::screen::sync() {}
void openmini::screen::setSync(bool) {}
struct screen : openmini::screen {
	bool canSync = true;
	uint16_t state[320*240];
	SDL sdl {SDL_INIT_VIDEO};
	Window win {"openmini4pc",SDL_WINDOWPOS_UNDEFINED,SDL_WINDOWPOS_UNDEFINED,640,480,0};
	Renderer render {win,-1,SDL_RENDERER_ACCELERATED};
	Texture tex {render,SDL_PIXELFORMAT_ARGB1555,SDL_TEXTUREACCESS_STATIC,320,240};
	bool autoSync = false;
	void sync() override {
		tex.Update(Rect(0,0,320,240),state,320*2);
		render.Copy(tex,Rect(0,0,320,240),Rect(0,0,640,480));
		render.Present();
	}
	void setSync(bool value) override {autoSync=!value;}
	screen() {
		width=320;
		height=240;
	}
	~screen() {}
	void write(int x, int y, uint16_t z) {
		if (x<0) return;
		if (y<0) return;
		if (x>=width) return;
		if (y>=height) return;
		state[y*width+x]=z;
		if (autoSync) sync();
	}
	void draw(uint16_t *buf, int16_t x0, int16_t y0, uint8_t width, uint8_t height) override {
		for (int y = 0; y < height; y++) {
			for (int x = 0; x < width; x++) {
				write(x0+x,y0+y,*buf);
				++buf;
			}
		}
	}
	void fill(int16_t x0, int16_t y0, uint8_t width, uint8_t height, uint16_t color) override {
		for (int y = 0; y < height; y++)
			for (int x = 0; x < width; x++)
				write(x0+x,y0+y,color);
	}
};
screen builtin_screen;

openmini::bus::uart::uart(pin &tx, pin &rx) : tx(tx),rx(rx) {}
int openmini::bus::uart::send(const void *buf, int length) {
	std::cerr.write(static_cast<const char*>(buf),length);
	return length;
}
int openmini::bus::uart::recv(void *buf, int length) {
	std::cin.read(static_cast<char*>(buf),length);
	return length;
}
struct sdl2input : openmini::input {
	bool poll() override {
		for (int i = 0; i < 16; i++) changed[i]=false;
		SDL_Event event;
		bool flag = false;
		while (SDL_PollEvent(&event)) {
			if (event.type==SDL_QUIT) {
				std::exit(0);
			} else if ((event.type==SDL_KEYDOWN)||(event.type==SDL_KEYUP)) {
				bool ka = event.type==SDL_KEYDOWN;
				switch (event.key.keysym.sym) {
					case SDLK_RETURN: // OK
						changed[button::ok]=changed[button::ok]||(active[button::ok]^ka);
						active[button::ok]=ka;
						flag=changed[button::ok];
						break;
					case SDLK_UP: // up
						changed[button::up]=changed[button::up]||(active[button::up]^ka);
						active[button::up]=ka;
						flag=true;
						break;
					case SDLK_DOWN: // down
						changed[button::down]=changed[button::down]||(active[button::down]^ka);
						active[button::down]=ka;
						flag=flag||changed[button::down];
						break;
					case SDLK_LEFT: // left
						changed[button::left]=changed[button::left]||(active[button::left]^ka);
						active[button::left]=ka;
						flag=flag||changed[button::left];
						break;
					case SDLK_RIGHT: // right
						changed[button::right]=changed[button::right]||(active[button::right]^ka);
						active[button::right]=ka;
						flag=flag||changed[button::right];
						break;
					case SDLK_BACKSPACE: // back
						changed[button::back]=changed[button::back]||(active[button::back]^ka);
						active[button::back]=ka;
						flag=flag||changed[button::back];
						break;
					case SDLK_h: // home
						changed[button::home]=changed[button::home]||(active[button::home]^ka);
						active[button::home]=ka;
						flag=flag||changed[button::home];
						break;
					case SDLK_m: // menu
						changed[button::menu]=changed[button::menu]||(active[button::menu]^ka);
						active[button::menu]=ka;
						flag=flag||changed[button::menu];
						break;
					case SDLK_ESCAPE: // quit
						changed[button::quit]=changed[button::quit]||(active[button::quit]^ka);
						active[button::quit]=ka;
						flag=flag||changed[button::quit];
						break;
					case SDLK_1: // f1
						changed[button::f1]=changed[button::f1]||(active[button::f1]^ka);
						active[button::f1]=ka;
						flag=flag||changed[button::f1];
						break;
					case SDLK_2: // f2
						changed[button::f2]=changed[button::f2]||(active[button::f2]^ka);
						active[button::f2]=ka;
						flag=flag||changed[button::f2];
						break;
					case SDLK_3: // f3
						changed[button::f3]=changed[button::f3]||(active[button::f3]^ka);
						active[button::f3]=ka;
						flag=flag||changed[button::f3];
						break;
				}
			}
		}
		return flag;
	}
};
std::vector<std::string> openmini::storage::filesystem::ls(std::string) {return {};}
std::unique_ptr<openmini::storage::file> openmini::storage::filesystem::open(std::string,bool) {return nullptr;}
void openmini::storage::device::read(uint64_t, void *, uint32_t) {}
void openmini::storage::device::write(uint64_t, void *, uint32_t) {}
void openmini::storage::device::sync() {}
void openmini::storage::file::read(uint64_t, void *, uint32_t) {}
void openmini::storage::file::write(uint64_t, void *, uint32_t) {}
void openmini::storage::file::resize(uint64_t) {}
void openmini::storage::file::close() {}
bool openmini::input::poll() {return false;}
struct builtinfs : openmini::storage::filesystem {
	struct file : openmini::storage::file {
		const bool readonly;
		std::fstream f;
		std::string name;
		file(std::string name, bool readonly) : name(name),readonly(readonly),f(name,std::ios_base::in|std::ios_base::openmode(readonly?0:std::ios_base::out)|std::ios_base::binary) {}
		void write(uint64_t pos, void *buf, uint32_t size) override {
			f.seekp(pos,f.beg);
			f.write(static_cast<const char*>(buf),size);
		}
		void read(uint64_t pos, void *buf, uint32_t size) override {
			f.seekg(pos,f.beg);
			f.read(static_cast<char*>(buf),size);
		}
		void resize(uint64_t size) override {
			f.close();
			std::error_code ec;
			std::filesystem::resize_file(std::filesystem::path(name), size, ec);
			f=std::fstream(name,std::ios_base::in|std::ios_base::openmode(readonly?0:std::ios_base::out)|std::ios_base::binary);
		}
		void close() override {
			f.close();
		}
	};
	std::unique_ptr<openmini::storage::file> open(std::string path, bool ro = true) override {
		file *f = new file{path,ro};
		return std::unique_ptr<openmini::storage::file>(static_cast<openmini::storage::file*>(f));
	}
	std::vector<std::string> ls(std::string path) override {
		std::vector<std::string> files;
		auto iter = std::filesystem::directory_iterator(path);
		for (auto x : iter)
			files.emplace_back(x.path().filename().string());
		return files;
	}
};
void openmini::bus::pin::set(bool) {}
bool openmini::bus::pin::get() {return false;}
openmini::bus::pin::mode openmini::bus::pin::setMode(openmini::bus::pin::mode) {return INPUT;}
openmini::bus::pin::mode openmini::bus::pin::getMode() {return INPUT;}
void openmini::bus::pin::analog::set(float) {}
float openmini::bus::pin::analog::get() {return 0.0;}
openmini::bus::pin::mode openmini::bus::pin::analog::setMode(openmini::bus::pin::mode) {return INPUT;}
openmini::bus::pin::mode openmini::bus::pin::analog::getMode() {return INPUT;}
sdl2input builtin_input;
openmini::bus::pin nil_pin;
openmini::bus::uart builtin_debug_uart{nil_pin,nil_pin};
openmini::screen &openmini::builtin::screen = builtin_screen;
openmini::bus::uart &openmini::builtin::debug = builtin_debug_uart;
openmini::input &openmini::builtin::input = builtin_input;
builtinfs builtin_fs;
openmini::storage::filesystem &openmini::builtin::fs = builtin_fs;



// console implementation:

// font:
const uint8_t font[256][18] = {
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00001001,
		0b01010100,
		0b00101010,
		0b01010000,
		0b10100000,
		0b01011110,
		0b10011001,
		0b00000010,
		0b00000101,
		0b11110010,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b11111001,
		0b10110111,
		0b11101101,
		0b11011111,
		0b10111111,
		0b01100001,
		0b11100111,
		0b11111110,
		0b11111101,
		0b11110011,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100011,
		0b11001111,
		0b10011111,
		0b00111111,
		0b01111111,
		0b01111100,
		0b01110000,
		0b01000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000000,
		0b10000011,
		0b10001111,
		0b00111111,
		0b00111110,
		0b00111000,
		0b00100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000000,
		0b10000011,
		0b11000111,
		0b10111001,
		0b01110011,
		0b11100111,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000000,
		0b11000011,
		0b11001111,
		0b10111111,
		0b01111111,
		0b01111110,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000110,
		0b00011110,
		0b00111100,
		0b00110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b11111111,
		0b11111110,
		0b11111101,
		0b11111011,
		0b11110111,
		0b11101111,
		0b11011111,
		0b10111001,
		0b01100001,
		0b11000011,
		0b11001110,
		0b11111101,
		0b11111011,
		0b11110111,
		0b11101111,
		0b11011111,
		0b10111111,
		0b01111111,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000111,
		0b00011001,
		0b00100001,
		0b01000010,
		0b11001100,
		0b11110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b11111111,
		0b11111110,
		0b11111101,
		0b11111011,
		0b11110111,
		0b01101111,
		0b01011000,
		0b10100110,
		0b01011110,
		0b10111101,
		0b00110010,
		0b00001101,
		0b11111011,
		0b11110111,
		0b11101111,
		0b11011111,
		0b10111111,
		0b01111111,
	},
	{
		0b00000000,
		0b00000000,
		0b11100000,
		0b10000001,
		0b10000011,
		0b10000101,
		0b10001001,
		0b10000111,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b11110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b00110000,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00011110,
		0b00011000,
		0b11111100,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b01100011,
		0b11000110,
		0b10001111,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011100,
		0b00111100,
		0b00111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00110011,
		0b11100110,
		0b11001111,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b11001100,
		0b10011101,
		0b00111011,
		0b00110011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b10000000,
		0b01100001,
		0b00011011,
		0b10001111,
		0b01110011,
		0b00111100,
		0b10110110,
		0b01100001,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000010,
		0b00001100,
		0b00111000,
		0b11110000,
		0b11100000,
		0b11000011,
		0b10011111,
		0b00001111,
		0b00001111,
		0b00001110,
		0b00001100,
		0b00001000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b10000000,
		0b10000000,
		0b10000001,
		0b10000011,
		0b10000111,
		0b11001111,
		0b00011111,
		0b00111110,
		0b01111000,
		0b11100000,
		0b10000000,
		0b00000001,
		0b00000010,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100000,
		0b11100001,
		0b00000111,
		0b00000011,
		0b00000110,
		0b00001100,
		0b01111110,
		0b01111000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b00000000,
		0b10011000,
		0b00110001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b11011011,
		0b10110110,
		0b01101101,
		0b10011011,
		0b00110111,
		0b01101100,
		0b11011000,
		0b10110000,
		0b01100001,
		0b11000011,
		0b00000110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b01111100,
		0b10001100,
		0b00110001,
		0b11000000,
		0b11000001,
		0b11000110,
		0b10011000,
		0b00110001,
		0b00110110,
		0b00111000,
		0b11000000,
		0b00011000,
		0b11100011,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01111111,
		0b11111110,
		0b11111100,
		0b11111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100000,
		0b11100001,
		0b00000111,
		0b00000011,
		0b00000110,
		0b00001100,
		0b01111110,
		0b01111000,
		0b01100000,
		0b11110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100000,
		0b11100001,
		0b00000111,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b11111100,
		0b11110000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000011,
		0b10001100,
		0b00111111,
		0b00110000,
		0b00110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000001,
		0b10000001,
		0b00111111,
		0b00000110,
		0b00011000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b11111110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000100,
		0b10011001,
		0b01111111,
		0b01100110,
		0b01001000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000000,
		0b00000011,
		0b00000111,
		0b00011111,
		0b00111110,
		0b11111110,
		0b11111100,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11110000,
		0b11100111,
		0b10001111,
		0b00001111,
		0b00011111,
		0b00011100,
		0b00111000,
		0b00100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100000,
		0b11000001,
		0b10000011,
		0b00000111,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b11001100,
		0b10011000,
		0b00110001,
		0b01000011,
		0b00000010,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b10110000,
		0b01100001,
		0b11100011,
		0b10001111,
		0b00001101,
		0b00011011,
		0b00110110,
		0b11111110,
		0b11011000,
		0b10110000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00011000,
		0b00110000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b01100100,
		0b10000000,
		0b00001111,
		0b00110000,
		0b01100000,
		0b11000010,
		0b10001100,
		0b11110001,
		0b10000001,
		0b00000001,
		0b00000011,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00110000,
		0b01100100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b10001100,
		0b00001001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01110000,
		0b10110000,
		0b01100001,
		0b10000011,
		0b10000011,
		0b10011011,
		0b00011101,
		0b00110011,
		0b01100110,
		0b11001100,
		0b01110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00011000,
		0b00110000,
		0b01100000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b01100000,
		0b10000000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00110000,
		0b11000000,
		0b00000000,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b01100000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b00001100,
		0b10001111,
		0b01111111,
		0b00111100,
		0b11001100,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000011,
		0b00000110,
		0b00111111,
		0b00011000,
		0b00110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b00111111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b00110000,
		0b00110011,
		0b01101100,
		0b11011000,
		0b10110110,
		0b01101101,
		0b11000011,
		0b10000110,
		0b10011001,
		0b11100001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11100000,
		0b11100000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00000011,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b10001100,
		0b11111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00001111,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000000,
		0b11000001,
		0b11000011,
		0b11000110,
		0b10001100,
		0b00111111,
		0b00110000,
		0b01100000,
		0b11000000,
		0b11000000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00011001,
		0b00110000,
		0b01100000,
		0b11000000,
		0b00001111,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01110000,
		0b00110000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10001111,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00011001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b01100110,
		0b10001100,
		0b10001111,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b01100110,
		0b10001100,
		0b00011111,
		0b00110000,
		0b01100000,
		0b11000000,
		0b11000000,
		0b11110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00110000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00110000,
		0b01100000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000011,
		0b00000011,
		0b00000011,
		0b00000011,
		0b00000011,
		0b00001100,
		0b00110000,
		0b11000000,
		0b00000000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b00001111,
		0b00000000,
		0b00000000,
		0b01111110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00110000,
		0b11000000,
		0b00000000,
		0b00000011,
		0b00001100,
		0b00110000,
		0b00110000,
		0b00110000,
		0b00110000,
		0b00110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b11110000,
		0b00110001,
		0b01100110,
		0b11001100,
		0b10011110,
		0b00111101,
		0b01111011,
		0b01110110,
		0b00001100,
		0b11110000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00100000,
		0b11100000,
		0b01100000,
		0b01100011,
		0b11001100,
		0b10011000,
		0b00111111,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00110000,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00001111,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b11111001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b00110000,
		0b00110011,
		0b01100100,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b10000110,
		0b10011000,
		0b11100001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01111100,
		0b10110000,
		0b01100001,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b11011000,
		0b11111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00110001,
		0b01100011,
		0b11000100,
		0b10000010,
		0b00000111,
		0b00001011,
		0b00000110,
		0b10001100,
		0b10011000,
		0b11111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00110001,
		0b01100011,
		0b11000100,
		0b10000010,
		0b00000111,
		0b00001011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b01111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b00110000,
		0b00110011,
		0b01100100,
		0b11000000,
		0b10000000,
		0b00111101,
		0b01100011,
		0b11000110,
		0b10011000,
		0b11100001,
		0b00000010,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011111,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11100000,
		0b10000001,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110011,
		0b01100110,
		0b11001100,
		0b11110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10011100,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10000110,
		0b00000111,
		0b00001111,
		0b00110110,
		0b11001100,
		0b10011000,
		0b00111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00111100,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b10001100,
		0b10011000,
		0b11111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00001100,
		0b00111011,
		0b11110111,
		0b11101111,
		0b11011111,
		0b10110110,
		0b01100001,
		0b11000011,
		0b10000110,
		0b00001101,
		0b00011011,
		0b00000110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10001100,
		0b00111001,
		0b11110011,
		0b11100110,
		0b11001111,
		0b10011110,
		0b00111001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00110000,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00001111,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b01111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11010110,
		0b11101100,
		0b11110001,
		0b00000001,
		0b00000011,
		0b00001110,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00110000,
		0b01100011,
		0b11000110,
		0b10001100,
		0b00001111,
		0b00011011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111000,
		0b00011000,
		0b00110011,
		0b11000110,
		0b00000000,
		0b00000111,
		0b00011000,
		0b01100000,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b11011011,
		0b10010110,
		0b00001001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00001100,
		0b00011011,
		0b00110110,
		0b01101100,
		0b11011000,
		0b10110000,
		0b01100001,
		0b11000011,
		0b11001100,
		0b11110000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00001100,
		0b00011011,
		0b00110110,
		0b01101100,
		0b11011000,
		0b10110000,
		0b01101101,
		0b11011011,
		0b11111110,
		0b10011001,
		0b00110001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00001100,
		0b00011011,
		0b01100110,
		0b10000110,
		0b00000111,
		0b00000110,
		0b00001100,
		0b00111100,
		0b11001100,
		0b00001100,
		0b00011011,
		0b00000110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00001100,
		0b00011011,
		0b00110110,
		0b11001100,
		0b00001100,
		0b00001111,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11111100,
		0b00011011,
		0b00010110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00000110,
		0b00001101,
		0b11111011,
		0b00000111,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b01100000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00001000,
		0b00110000,
		0b11100000,
		0b10000000,
		0b00000011,
		0b00001110,
		0b00111000,
		0b11100000,
		0b10000000,
		0b00000001,
		0b00000010,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11110000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00001000,
		0b00111000,
		0b11011000,
		0b00011000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11100000,
		0b00011111,
		0b00000000,
		0b00000000,
	},
	{
		0b00001100,
		0b00011000,
		0b01100000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b00000011,
		0b00001100,
		0b00011111,
		0b00110011,
		0b01100110,
		0b11001100,
		0b01110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00011100,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10000011,
		0b00001101,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000111,
		0b10011000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11100000,
		0b10000000,
		0b00000001,
		0b10000011,
		0b10000111,
		0b10001101,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b01110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000111,
		0b10011000,
		0b00111111,
		0b00000011,
		0b00000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01110000,
		0b10110000,
		0b01100001,
		0b11000010,
		0b11000000,
		0b00000011,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b01111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11001101,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b11110000,
		0b00000001,
		0b01100011,
		0b10000110,
		0b00000111,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00011100,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10000110,
		0b00011011,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b10000000,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000000,
		0b00001110,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b01100011,
		0b11000110,
		0b00001100,
		0b00001111,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00011100,
		0b00110000,
		0b01100000,
		0b11000000,
		0b10001100,
		0b00001101,
		0b00001111,
		0b00011110,
		0b01101100,
		0b10011000,
		0b00111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01110000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11100000,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11100000,
		0b11001100,
		0b10111111,
		0b01101101,
		0b11011011,
		0b10110110,
		0b01101101,
		0b11011011,
		0b00000110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b10000111,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b00110001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000111,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b10000111,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b10011000,
		0b11110001,
		0b01100001,
		0b11000000,
		0b11000000,
		0b00000011,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11001101,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b11110000,
		0b00000001,
		0b00000011,
		0b00000110,
		0b00011110,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b10000111,
		0b00011011,
		0b00110011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b01111000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000111,
		0b00011000,
		0b00000011,
		0b00011100,
		0b01100000,
		0b10001100,
		0b11110001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00100000,
		0b01100000,
		0b11000000,
		0b11100000,
		0b00000111,
		0b00000011,
		0b00000110,
		0b00001100,
		0b00011000,
		0b10110000,
		0b11000001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11000110,
		0b10001100,
		0b00011001,
		0b00110011,
		0b01100110,
		0b11001100,
		0b01110000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11011000,
		0b10110000,
		0b01100001,
		0b11000011,
		0b11001100,
		0b11110000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11011000,
		0b10110000,
		0b01100001,
		0b11011011,
		0b10110110,
		0b11111101,
		0b00110011,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b10011000,
		0b00011001,
		0b00011110,
		0b00011000,
		0b01111000,
		0b10011000,
		0b00011001,
		0b00000110,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b01100000,
		0b11001100,
		0b10011000,
		0b00110001,
		0b01100011,
		0b11000110,
		0b10001100,
		0b11110001,
		0b00000011,
		0b00000110,
		0b11000110,
		0b00000111,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b11100000,
		0b11001111,
		0b00001100,
		0b00001100,
		0b00001100,
		0b00001100,
		0b10001100,
		0b11111001,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b11000000,
		0b11000001,
		0b10000000,
		0b00000001,
		0b10000011,
		0b00000011,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b10000000,
		0b00000011,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b01100000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00000000,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b11000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00111000,
		0b11000000,
		0b10000000,
		0b00000001,
		0b00000011,
		0b00011100,
		0b00001100,
		0b00011000,
		0b00110000,
		0b01100000,
		0b01110000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b10111000,
		0b11011001,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	},
	{
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b10000000,
		0b10000000,
		0b10000011,
		0b10001101,
		0b00110001,
		0b01100011,
		0b11000110,
		0b11111100,
		0b00000001,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
	}
};

uint16_t font_buf[16*9];
void drawchar(uint8_t chr) {
	uint16_t *buf = font_buf;
	for (int j = 0; j < 18;) {
		uint8_t x = font[chr][j];
		for (int k = 0; k < 8; k++) {
			*buf++ = ((x&1)?0xFFFF:0x8000);
			x>>=1;
		}
	}
}
openmini::screen::console::console(screen &scr) : scr(scr) {
	chr_width=9;
	chr_height=16;
	width=scr.width/chr_width;
	height=scr.height/chr_height;
	state.resize(width*height);
}
void openmini::screen::console::putc(const uint8_t chr, uint8_t x, uint8_t y) {
	int idx = width*y+x;
	if (state[idx]!=chr) {
		drawchar(chr);
		scr.draw(font_buf, chr_width*x, chr_height*y, chr_width, chr_height);
		state[idx]=chr;
	}
}
void scroll(openmini::screen::console &con) {
	int idx = con.width;
	for (int y = 0; y < con.height-1; y++)
		for (int x = 0; x < con.width; x++, idx++)
			con.putc(con.state[idx],x,y);
	for (int x = 0; x < con.width; x++)
		con.putc(' ',x,con.height-1);
}
void clear(openmini::screen::console &con) {
	for (int y = 0; y < con.height; y++)
		for (int x = 0; x < con.width; x++)
			con.putc(' ',x,y);
}
/*void printc(openmini::screen::console &con, uint8_t chr) {
	switch (chr) {
		case '\r': con.pos_x=0; break;
		case '\n': if (++con.pos_y>=con.height) {scroll(con);con.pos_y=con.height-1;} break;
		case '\t': con.pos_x+=4; if (con.pos_x>=con.width) con.pos_x=con.width; break;
		case '\f': clear(con); con.pos_x=0;con.pos_y=0; break;
		case '\b': if (--con.pos_x<0) con.pos_x=0; break;
		default:
			if (con.pos_x>=con.width) {
				con.pos_x=0;
				if (++con.pos_y>=con.height) {scroll(con);con.pos_y=con.height-1;}
			}
			con.putc(chr,con.pos_x,con.pos_y);
			if (++con.pos_x>=con.width) {
				con.pos_x=0;
				if (++con.pos_y>=con.height) {scroll(con);con.pos_y=con.height-1;}
			}
	}
}*/
void openmini::screen::console::print(const std::string str) {
	for (uint8_t chr : str) {
		switch (chr) {
		case '\r': pos_x=0; break;
		case '\n': if (++pos_y>=height) {scroll(*this);pos_y=height-1;} break;
		case '\t': pos_x+=4; if (pos_x>=width) pos_x=width; break;
		case '\f': clear(*this); pos_x=0;pos_y=0; break;
		case '\b': if (--pos_x>=width) pos_x=0; break;
		default:
			if (pos_x>=width) {
				pos_x=0;
				if (++pos_y>=height) {scroll(*this);pos_y=height-1;}
			}
			putc(chr,pos_x,pos_y);
			if (++pos_x>=width) {
				pos_x=0;
				if (++pos_y>=height) {scroll(*this);pos_y=height-1;}
			}
		}
	}
}